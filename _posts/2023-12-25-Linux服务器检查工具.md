---
layout: post
title: Linux服务器检查工具
subtitle: 使用工具对网络进行测试
cover-img: 
thumbnail-img: assets/img/Linux服务器检查工具/th.jpg
share-img: 
tags: [network]
author: Jamie
---

### 设备随机读写性能测试

![Crepe](/assets/img/Linux服务器检查工具/Snipaste_2023-12-29_09-55-46.png)

```shell
fio -direct=1 -iodepth=32 -rw=write -ioengine=libaio -bs=1024k -size=10G -numjobs=1 -runtime=600 -group_reporting -filename=/data/fiotest/fiotest.txt -name=Write_BandWidth_Test
```

### 网络测试

![Crepe](/assets/img/Linux服务器检查工具/企业微信截图_16977812896091.png)

```shell
# 需要注意和本机不能在同一个网段下
wget https://iperf.fr/download/fedora/iperf3-3.1.3-1.fc24.x86_64.rpm
rpm -ivh iperf3-3.1.3-1.fc24.x86_64.rpm
# 服务端
iperf3  -s 
# 客户端
iperf3 -c 192.168.100.21 -B 192.168.100.22 
```

### OpenEuler修改yum源

```shell
1. 备份
\cp /etc/yum.repos.d/openEuler.repo /etc/yum.repos.d/openEuler.repo.backup
2. 修改为阿里源地址
 sed -i "s#repo.openeuler.org#mirrors.aliyun.com/openeuler#g" /etc/yum.repos.d/openEuler.repo
3. 运行生成缓存
yum makecache
```

### 隧道穿透

```shell
PC端本机访问测试服务器数据库
ssh -f -N -L localhost:10010:localhost:10010 renjing@1.1.1.1  -p22622
ssh -f -N -L localhost:10009:localhost:10009 renjing@1.1.1.1  -p22622
ssh -f -N -L localhost:10009:127.0.0.1:3306 rj@1.1.1.1  -p22
ssh -f -N -L localhost:3306:127.0.0.1:3306 root@1.1.1.1  -p22
ssh -f -N -L localhost:6379:127.0.0.1:6379 root@1.1.1.1  -p22
ssh -f -N -L localhost:6379:127.0.0.1:6379 root@1.1.1.1  -p22
```

### 自动化执行脚本

```shell
#!/bin/bash
my_string="1.1.1.1"
IFS=','
read -ra my_array <<< "$my_string"
for element in "${my_array[@]}"; do
    echo "Host: $element"
    HOST=$element
    DATABASE=http_flow
    PD="password"
    RKYHL="select '$HOST', sum(up)/1024/1024 from http_flow.20231126 where http = 'push-rtmp-l13.douyincdn.com';"
    
    expect <<EOF
    spawn mysql -h$HOST -upalog -p$PD
    expect "mysql>"
    sleep 1
    send "$RKYHL\r"
    expect "mysql>"
    send "quit\r"
    expect "mysql>"
EOF
done
```